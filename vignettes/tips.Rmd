---
title: "Tips for using the All of Us Workbench"
output: rmarkdown::html_vignette
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = FALSE
)
```

```{r setup}
library(allofus)
```

Working with data in AllofUs is similar to working with other OMOP CDM instances with a few important differences:

-   AllofUs includes data from most of the typical OMOP CDM tables, as well as a few additional AllofUs specific tables. The data dictionary for the registered tier can be found [here](https://docs.google.com/spreadsheets/d/1HNxLGGKCJFWi5dBXiFgu3nZlV6klMLiHVjqANCu03UY/edit#gid=183931508) and the controlled tier [here](https://docs.google.com/spreadsheets/d/1XLVq84LLd0VZMioF2sPwyiaPw3EFp5c8o1CTWGPH-Yc/edit#gid=183931508). For the most part, the additional tables hold data collected by AllofUs that is not typical of EHR or claims data (e.g., fitbit data).

-   We can write temporary tables on the database in AllofUs but dplyr/dbplyr won't write temporary tables with a bigquery db. 

-   The workbench uses jupyter notebooks.

-   It's important to understand where data is stored for All of Us. Each user has a persistent disk ("your workspace") that is specific to that user. For a given Project Workspace, there is a shared "data bucket" that holds data that anyone with access to the Project workspace can access. Unless you're sure that no one else will need to see the data or the scripts that use the data, we currently recommend using only the bucket for storage that needs be permanent. However, unlike the persistent disk, we can't just run `read.csv("data.csv")` from the bucket. We have to move data from the bucket into the your persistent disk/your workspace (the current environment) first.

    ![](https://support.researchallofus.org/hc/article_attachments/14431834598036)  
    *source: https://support.researchallofus.org/hc/article_attachments/14431834598036*
    
